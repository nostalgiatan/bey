# BEY TUI 界面演示

本文档展示 BEY TUI（终端用户界面）的实际界面效果。

## 运行方式

```bash
# 编译并运行 TUI 模式
cargo run --features tui --release

# 或者先编译，然后运行
cargo build --features tui --release
./target/release/bey
```

## TUI 界面布局

### 主界面

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  BEY - 分布式文件传输系统 (TUI)                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  设备列表            │  日志输出                                          ┃
┃  ────────────────    │  ──────────────────────────────────────────────    ┃
┃                      │                                                    ┃
┃  本地设备:           │  [INFO] 2025-11-01 03:30:15                        ┃
┃    device-a1b2c3     │  BEY TUI 启动                                      ┃
┃                      │                                                    ┃
┃  已发现设备:         │  [INFO] 2025-11-01 03:30:16                        ┃
┃    (无)              │  设备ID: device-a1b2c3                            ┃
┃                      │                                                    ┃
┃                      │  [INFO] 2025-11-01 03:30:16                        ┃
┃  使用 ↑↓ 导航       │  应用程序初始化完成                                ┃
┃                      │                                                    ┃
┃                      │  [INFO] 2025-11-01 03:30:17                        ┃
┃                      │  mDNS 设备发现服务已启动                           ┃
┃                      │                                                    ┃
┃                      │  [INFO] 2025-11-01 03:30:17                        ┃
┃                      │  UDP 设备发现服务已启动                            ┃
┃                      │                                                    ┃
┃                      │  [INFO] 2025-11-01 03:30:17                        ┃
┃                      │  按 '?' 查看帮助                                   ┃
┃                      │                                                    ┃
┗━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  [正常模式] q=退出 | ?=帮助 | :=命令模式 | ↑↓=导航                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 有设备连接时的界面

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  BEY - 分布式文件传输系统 (TUI)                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  设备列表            │  日志输出                                          ┃
┃  ────────────────    │  ──────────────────────────────────────────────    ┃
┃                      │                                                    ┃
┃▶ 本地设备:           │  [INFO] 2025-11-01 03:32:45                        ┃
┃    device-a1b2c3     │  新设备上线: Laptop-Win11                          ┃
┃    192.168.1.100     │                                                    ┃
┃                      │  [INFO] 2025-11-01 03:32:46                        ┃
┃  已发现设备: (2)     │  设备信息已更新                                    ┃
┃  • Laptop-Win11      │    设备: Laptop-Win11                             ┃
┃    192.168.1.101     │    地址: 192.168.1.101:8080                       ┃
┃    类型: Desktop     │    类型: Desktop                                  ┃
┃                      │                                                    ┃
┃  • Phone-Android     │  [INFO] 2025-11-01 03:33:12                        ┃
┃    192.168.1.102     │  新设备上线: Phone-Android                         ┃
┃    类型: Mobile      │                                                    ┃
┃                      │  [DEBUG] 2025-11-01 03:33:15                       ┃
┃  使用 ↑↓ 选择设备   │  mDNS 查询完成: 2 个设备                           ┃
┃                      │                                                    ┃
┗━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  [正常模式] q=退出 | ?=帮助 | :=命令模式 | ↑↓=导航                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 帮助界面 (按 '?')

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  BEY - 分布式文件传输系统 (TUI)                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  快捷键帮助                                                               ┃
┃  ════════════════════════════════════════════════════════════════════    ┃
┃                                                                           ┃
┃  正常模式:                                                                ┃
┃    q           - 退出应用程序                                             ┃
┃    Ctrl+C      - 强制退出                                                 ┃
┃    ?           - 显示/隐藏此帮助页面                                      ┃
┃    :           - 进入命令模式                                             ┃
┃    ↑/↓         - 在设备列表中导航                                        ┃
┃                                                                           ┃
┃  命令模式:                                                                ┃
┃    :quit       - 退出应用程序                                             ┃
┃    :clear      - 清空日志                                                 ┃
┃    :help       - 显示帮助                                                 ┃
┃    :devices    - 列出所有设备                                             ┃
┃    Esc         - 返回正常模式                                             ┃
┃    Enter       - 执行命令                                                 ┃
┃                                                                           ┃
┃  功能说明:                                                                ┃
┃    • 左侧显示本地和已发现的设备列表                                       ┃
┃    • 右侧显示实时系统日志                                                 ┃
┃    • 支持动态终端大小调整                                                 ┃
┃    • 自动发现局域网内的其他 BEY 设备                                      ┃
┃                                                                           ┃
┃  按 '?' 或 Esc 返回主界面                                                 ┃
┃                                                                           ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  [帮助模式] ?=关闭帮助 | Esc=返回                                         ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 命令模式 (按 ':')

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  BEY - 分布式文件传输系统 (TUI)                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  设备列表            │  日志输出                                          ┃
┃  ────────────────    │  ──────────────────────────────────────────────    ┃
┃                      │                                                    ┃
┃  本地设备:           │  [INFO] 最近的日志消息...                          ┃
┃    device-a1b2c3     │                                                    ┃
┃                      │                                                    ┃
┃  已发现设备: (1)     │                                                    ┃
┃  • Laptop-Win11      │                                                    ┃
┃    192.168.1.101     │                                                    ┃
┃                      │                                                    ┃
┗━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  [命令模式] :devices█                                                     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 键盘操作

### 正常模式
- `q` - 退出应用程序
- `Ctrl+C` - 强制退出
- `o` - 打开操作菜单（新增）
- `?` - 显示/隐藏帮助界面
- `:` - 进入命令模式
- `↑`/`↓` - 在设备列表中向上/向下导航

### 操作菜单模式（新增）
- `↑`/`↓` - 选择操作
- `Enter` - 确认选择并进入输入表单
- `Esc` 或 `q` - 返回正常模式

可用操作：
1. 发送私信
2. 发送群聊消息
3. 广播消息
4. 添加剪切板
5. 同步剪切板到对等设备
6. 同步剪切板到群组
7. 上传文件到云存储
8. 从云存储下载文件
9. 发送文件到对等设备

### 输入表单模式（新增）
- `Tab` - 切换到下一个输入字段
- `Shift+Tab` - 切换到上一个输入字段
- `字符输入` - 在当前字段输入内容
- `Backspace` - 删除字符
- `Enter` - 提交表单并执行操作
- `Esc` - 返回操作菜单

### 命令模式
- `:quit` 或 `:q` - 退出应用程序
- `:clear` - 清空日志显示
- `:help` - 显示帮助信息
- `:devices` - 列出所有已发现的设备
- `Enter` - 执行输入的命令
- `Esc` - 返回正常模式
- `Backspace` - 删除字符

### 帮助模式
- `?` - 关闭帮助，返回正常模式
- `Esc` - 关闭帮助，返回正常模式

## 功能特性

1. **实时设备发现**
   - 自动发现局域网内的 BEY 设备
   - 显示设备名称、IP 地址和类型
   - 支持 mDNS 和 UDP 两种发现方式

2. **实时日志查看**
   - 彩色日志级别标识（INFO/WARN/ERROR/DEBUG）
   - 自动滚动显示最新日志
   - 最多保存 1000 条日志记录

3. **交互式操作（新增）**
   - **消息发送**: 支持私信、群聊消息和广播消息
   - **剪切板同步**: 添加剪切板内容并同步到其他设备或群组
   - **文件操作**: 上传到云存储、从云存储下载、发送到对等设备
   - **表单输入**: 直观的表单界面，支持多字段输入和Tab切换
   - **实时反馈**: 操作结果实时显示在日志中

4. **响应式布局**
   - 自动适应终端窗口大小
   - 动态调整内容显示区域
   - 支持最小 80x24 终端尺寸

5. **非阻塞运行**
   - TUI 运行在独立的异步任务中
   - 不影响后台服务运行
   - 设备发现、网络通信等服务持续在后台运行

## 注意事项

- TUI 需要支持 ANSI 颜色的终端
- 推荐使用现代终端模拟器（如 Windows Terminal、iTerm2、GNOME Terminal）
- 最小推荐终端尺寸：80 列 × 24 行
- 退出 TUI 会同时停止所有后台服务
- 所有操作都会实时记录到日志中

## 与 GUI 的区别

| 特性 | TUI | GUI |
|------|-----|-----|
| 界面 | 终端字符界面 | 图形窗口界面 |
| 资源占用 | 极低 | 较高 |
| 远程访问 | 支持 SSH | 需要 X11/RDP |
| 适用场景 | 服务器、远程管理 | 桌面日常使用 |
| 依赖 | 仅需终端 | 需要图形环境 |
| 交互方式 | 键盘导航和表单 | 鼠标点击和拖拽 |
